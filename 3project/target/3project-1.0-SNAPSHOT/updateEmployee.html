<!DOCTYPE html>
<!-- saved from url=(0047)http://192.168.111.115:8888/updateEmployee.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>修改员工页面</title>
    <link rel="stylesheet" type="text/css" href="/easy-ui/themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="/easy-ui/themes/icon.css">
    <link rel="stylesheet" type="text/css" href="/easy-ui/demo/demo.css">
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/js/jquery.easyui.min.js"></script>
</head>
<body>
<div align="center">
    <form id="ff" method="post">
        <input id="eid" name="eid" style="display: none">
        <table cellpadding="5">
            <tbody><tr>
                <td>员工姓名:</td>
                <td><input id="ename" class="easyui-textbox textbox-f" type="text" data-options="required:true" textboxname="ename" style="display: none;"><span class="textbox" style="width: 177px;"><input id="_easyui_textbox_input1" type="text" class="textbox-text validatebox-text" autocomplete="off" tabindex="" placeholder="" style="margin: 0px; padding-top: 0px; padding-bottom: 0px; height: 28px; line-height: 28px; width: 175px;"><input type="hidden" class="textbox-value" name="ename" value="管理员 张三"></span></td>
            </tr>
            <tr>
                <td>员工性别:</td>
                <td>
                    男： <input id="esex1" type="radio" name="esex" value="0">
                    女：<input id="esex2" type="radio" name="esex" value="1" checked="checked">
                </td>
            </tr>
            <tr>
                <td>员工年龄:</td>
                <td><input id="eage" class="easyui-textbox textbox-f" type="text" data-options="required:true" textboxname="eage" style="display: none;"><span class="textbox" style="width: 177px;"><input id="_easyui_textbox_input2" type="text" class="textbox-text validatebox-text" autocomplete="off" tabindex="" placeholder="" style="margin: 0px; padding-top: 0px; padding-bottom: 0px; height: 28px; line-height: 28px; width: 175px;"><input type="hidden" class="textbox-value" name="eage" value="26"></span></td>
            </tr>
            <tr>
                <td>联系电话:</td>
                <td><input id="etelephone" class="easyui-textbox textbox-f" type="text" data-options="required:true" textboxname="etelephone" style="display: none;"><span class="textbox" style="width: 177px;"><input id="_easyui_textbox_input3" type="text" class="textbox-text validatebox-text" autocomplete="off" tabindex="" placeholder="" style="margin: 0px; padding-top: 0px; padding-bottom: 0px; height: 28px; line-height: 28px; width: 175px;"><input type="hidden" class="textbox-value" name="etelephone" value="66273736"></span></td>
            </tr>
            <tr>
                <td>入职日期:</td>
                <td><input id="hiredate" class="easyui-datebox datebox-f combo-f textbox-f" type="text" data-options="required:true,formatter:myformatter,parser:myparser" textboxname="hiredate" style="display: none;" comboname="hiredate"><span class="textbox combo datebox" style="width: 177px;"><span class="textbox-addon textbox-addon-right" style="right: 0px; top: 0px;"><a href="javascript:;" class="textbox-icon combo-arrow" icon-index="0" tabindex="-1" style="width: 26px; height: 28px;"></a></span><input id="_easyui_textbox_input6" type="text" class="textbox-text validatebox-text" autocomplete="off" tabindex="" placeholder="" style="margin: 0px 26px 0px 0px; padding-top: 0px; padding-bottom: 0px; height: 28px; line-height: 28px; width: 149px;"><input type="hidden" class="textbox-value" name="hiredate" value="2019-12-29"></span></td>
            </tr>
            <tr>
                <td>工号:</td>
                <td><input id="jobnumber" class="easyui-textbox textbox-f" type="text" data-options="required:true" textboxname="jobnumber" style="display: none;"><span class="textbox" style="width: 177px;"><input id="_easyui_textbox_input4" type="text" class="textbox-text validatebox-text" autocomplete="off" tabindex="" placeholder="" style="margin: 0px; padding-top: 0px; padding-bottom: 0px; height: 28px; line-height: 28px; width: 175px;"><input type="hidden" class="textbox-value" name="jobnumber" value="666666"></span></td>
            </tr>
           <!-- <tr>
                <td>重置密码:</td>
                <td><input class="easyui-textbox" type="text" name="password" data-options="required:true"></input></td>
            </tr>-->

            <tr>
                <td>员工角色:</td>
                <td><input id="cc1" class="easyui-combobox combobox-f combo-f textbox-f" data-options="
                valueField: &#39;rid&#39;,
                textField: &#39;rname&#39;,
                multiple:true,
                url:&#39;/role/getAllRoles&#39;" textboxname="rids" style="display: none;" comboname="rids"><span class="textbox combo" style="width: 177px;"><span class="textbox-addon textbox-addon-right" style="right: 0px; top: 0px;"><a href="javascript:;" class="textbox-icon combo-arrow" icon-index="0" tabindex="-1" style="width: 26px; height: 28px;"></a></span><input id="_easyui_textbox_input5" type="text" class="textbox-text validatebox-text" autocomplete="off" tabindex="" placeholder="" style="margin: 0px 26px 0px 0px; padding-top: 0px; padding-bottom: 0px; height: 28px; line-height: 28px; width: 149px;"><input type="hidden" class="textbox-value" name="rids" value="5"></span>
                </td>

            </tr>



        </tbody></table>
    </form>
</div>
<div style="text-align:center;padding:5px">
    <a href="javascript:void(0)" class="easyui-linkbutton l-btn l-btn-small" onclick="submitForm()" group="" id=""><span class="l-btn-left"><span class="l-btn-text">提交</span></span></a>
    <a href="javascript:void(0)" class="easyui-linkbutton l-btn l-btn-small" onclick="clearForm()" group="" id=""><span class="l-btn-left"><span class="l-btn-text">取消</span></span></a>
</div>
<script>
    function myformatter(date){
        var y = date.getFullYear();
        var m = date.getMonth()+1;
        var d = date.getDate();
        return y+'-'+(m<10?('0'+m):m)+'-'+(d<10?('0'+d):d);
    }
    function myparser(s){
        if (!s) return new Date();
        var ss = (s.split('-'));
        var y = parseInt(ss[0],10);
        var m = parseInt(ss[1],10);
        var d = parseInt(ss[2],10);
        if (!isNaN(y) && !isNaN(m) && !isNaN(d)){
            return new Date(y,m-1,d);
        } else {
            return new Date();
        }
    }
    $(function () {
        $.ajax({
            url:"/employee/getUpdateEmployee",
            success:function (data) {
                $("#eid").val(data.eid);
                $('#ename').textbox('setValue',data.ename);
                if(data.esex==0){
                    $('#esex1').attr('checked',true);
                }else{
                    $('#esex2').attr('checked',true);
                }
                $('#eage').textbox('setValue',data.eage);
                $('#etelephone').textbox('setValue',data.etelephone);
                $('#hiredate').datebox('setValue', data.hiredate);
                $('#jobnumber').textbox('setValue',data.jobnumber);
                $.each( data.eroles, function(i, n){
                    $('#cc1').combobox('select', n.rid);
                });
            }
        })

    })
    /**
     * 修改员工角色信息
     */
    function submitForm(){
        $('#ff').form('submit', {
            url:"/employee/updateEmployee",
            success:function(data){
                var obj = eval("("+data+")");
                alert(obj.message);
                if(obj.success){
                    window.location.href="/employeeList.html";
                }else{
                    window.location.reload();
                }
            }
        });
    }
    function clearForm(){
        $('#ff').form('clear');
    }
</script>

<div class="panel combo-p panel-htop" style="position: absolute; z-index: 10; display: none;"><div class="combo-panel panel-body panel-body-noheader" title="" id=""><div id="cc1_easyui_combobox_i1_0" class="combobox-item">财务</div><div id="cc1_easyui_combobox_i1_1" class="combobox-item combobox-item-selected">超级管理员</div><div id="cc1_easyui_combobox_i1_2" class="combobox-item">行政</div><div id="cc1_easyui_combobox_i1_3" class="combobox-item">程序员</div></div></div><div class="panel combo-p panel-htop" style="position: absolute; z-index: 10; display: none;"><div class="combo-panel panel-body panel-body-noheader" title="" id="" style="overflow: hidden;"><div class="datebox-calendar-inner panel-noscroll"><div class="calendar calendar-noborder easyui-fluid" style="width: 1px; height: 250px;"><div class="calendar-header"><div class="calendar-nav calendar-prevmonth"></div><div class="calendar-nav calendar-nextmonth"></div><div class="calendar-nav calendar-prevyear"></div><div class="calendar-nav calendar-nextyear"></div><div class="calendar-title"><span class="calendar-text">Dec 2019</span></div></div><div class="calendar-body" style="height: 220px;"><table class="calendar-dtable" cellspacing="0" cellpadding="0" border="0"><thead><tr><th>S</th><th>M</th><th>T</th><th>W</th><th>T</th><th>F</th><th>S</th></tr></thead><tbody><tr class="calendar-first"><td class="calendar-day calendar-other-month calendar-sunday calendar-first " abbr="2019,11,24" style="">24</td><td class="calendar-day calendar-other-month " abbr="2019,11,25" style="">25</td><td class="calendar-day calendar-other-month " abbr="2019,11,26" style="">26</td><td class="calendar-day calendar-other-month " abbr="2019,11,27" style="">27</td><td class="calendar-day calendar-other-month " abbr="2019,11,28" style="">28</td><td class="calendar-day calendar-other-month " abbr="2019,11,29" style="">29</td><td class="calendar-day calendar-other-month calendar-saturday calendar-last " abbr="2019,11,30" style="">30</td></tr><tr class=""><td class="calendar-day calendar-sunday calendar-first " abbr="2019,12,1" style="">1</td><td class="calendar-day " abbr="2019,12,2" style="">2</td><td class="calendar-day " abbr="2019,12,3" style="">3</td><td class="calendar-day " abbr="2019,12,4" style="">4</td><td class="calendar-day " abbr="2019,12,5" style="">5</td><td class="calendar-day " abbr="2019,12,6" style="">6</td><td class="calendar-day calendar-saturday calendar-last " abbr="2019,12,7" style="">7</td></tr><tr class=""><td class="calendar-day calendar-sunday calendar-first " abbr="2019,12,8" style="">8</td><td class="calendar-day " abbr="2019,12,9" style="">9</td><td class="calendar-day " abbr="2019,12,10" style="">10</td><td class="calendar-day " abbr="2019,12,11" style="">11</td><td class="calendar-day " abbr="2019,12,12" style="">12</td><td class="calendar-day " abbr="2019,12,13" style="">13</td><td class="calendar-day calendar-saturday calendar-last " abbr="2019,12,14" style="">14</td></tr><tr class=""><td class="calendar-day calendar-sunday calendar-first " abbr="2019,12,15" style="">15</td><td class="calendar-day " abbr="2019,12,16" style="">16</td><td class="calendar-day " abbr="2019,12,17" style="">17</td><td class="calendar-day " abbr="2019,12,18" style="">18</td><td class="calendar-day " abbr="2019,12,19" style="">19</td><td class="calendar-day " abbr="2019,12,20" style="">20</td><td class="calendar-day calendar-saturday calendar-last " abbr="2019,12,21" style="">21</td></tr><tr class=""><td class="calendar-day calendar-sunday calendar-first " abbr="2019,12,22" style="">22</td><td class="calendar-day " abbr="2019,12,23" style="">23</td><td class="calendar-day " abbr="2019,12,24" style="">24</td><td class="calendar-day " abbr="2019,12,25" style="">25</td><td class="calendar-day " abbr="2019,12,26" style="">26</td><td class="calendar-day " abbr="2019,12,27" style="">27</td><td class="calendar-day calendar-saturday calendar-last " abbr="2019,12,28" style="">28</td></tr><tr class="calendar-last"><td class="calendar-day calendar-selected calendar-sunday calendar-first " abbr="2019,12,29" style="">29</td><td class="calendar-day " abbr="2019,12,30" style="">30</td><td class="calendar-day " abbr="2019,12,31" style="">31</td><td class="calendar-day calendar-other-month " abbr="2020,1,1" style="">1</td><td class="calendar-day calendar-other-month " abbr="2020,1,2" style="">2</td><td class="calendar-day calendar-other-month " abbr="2020,1,3" style="">3</td><td class="calendar-day calendar-other-month calendar-saturday calendar-last " abbr="2020,1,4" style="">4</td></tr></tbody></table><div class="calendar-menu" style="display: none;"><div class="calendar-menu-year-inner"><span class="calendar-nav calendar-menu-prev"></span><span><input class="calendar-menu-year" type="text"></span><span class="calendar-nav calendar-menu-next"></span></div><div class="calendar-menu-month-inner"></div></div></div></div></div></div></div></body></html>